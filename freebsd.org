#+TITLE: BEASTIE BITS
#+PROPERTY: header-args :cache yes
#+PROPERTY: header-args+ :mkdirp yes
#+PROPERTY: header-args+ :results silent
#+PROPERTY: header-args+ :padline no
* GENERAL

https://docs.freebsd.org/en/books/handbook/x11/
https://docs.freebsd.org/en/books/handbook/kernelconfig/
https://www.duskopijetlovic.com/boot/dotfiles/howto/freebsd/config/sysadmin/2025/03/02/new-freebsd-system-setup.html

* HOSTNAMES

https://www.youtube.com/watch?v=TgeUniPBQjM&list=WL&index=1

Hostnames: freefall, groundrush, skyrush, thud, treefall

* BUGS/QUIRKS
** INTEL SOUND WEIRDNESS

https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=229190

If seeing a lot of this in the =dmesg=:

#+begin_src
hdac0: Unexpected unsolicited response from address 0: 00000000
#+end_src

Try :

#+begin_src
compat.linuxkpi.i915_disable_power_well="0"
#+end_src

In =/boot/loader.conf=
** MACBOOK FUNCTION KEY HACKING

#+begin_src diff
--- /usr/src/sys/dev/hid/hkbd.c.orig    2026-01-28 18:56:26.052780000 +0000
+++ /usr/src/sys/dev/hid/hkbd.c 2026-01-29 22:24:32.762481000 +0000
@@ -1,3 +1,4 @@
+/* -*- tab-width: 8; c-basic-offset: 8; indent-tabs-mode: t -*- */
 #include <sys/cdefs.h>
 /*-
  * SPDX-License-Identifier: BSD-2-Clause
@@ -122,6 +123,8 @@

 #define        MOD_EJECT       0x01
 #define        MOD_FN          0x02
+
+#define APPLE_FN_KEYCODE 0xff

 #define MOD_MIN     0xe0
 #define MOD_MAX     0xe7
@@ -291,7 +294,7 @@
	29, 42, 56, 105, 90, 54, 93, 106,       /* E0 - E7 */
	NN, NN, NN, NN, NN, NN, NN, NN, /* E8 - EF */
	NN, NN, NN, NN, NN, NN, NN, NN, /* F0 - F7 */
-       NN, NN, NN, NN, NN, NN, NN, NN, /* F8 - FF */
+       NN, NN, NN, NN, NN, NN, NN, 255,        /* F8 - FF */
 };

 static const uint8_t hkbd_boot_desc[] = { HID_KBD_BOOTPROTO_DESCR() };
@@ -619,6 +622,20 @@
	case 0x4f: return 0x4d; /* RIGHT ARROW -> END */
	case 0x52: return 0x4b; /* UP ARROW -> PGUP */
	case 0x51: return 0x4e; /* DOWN ARROW -> PGDN */
+
+       case 0x3a: return 0x68; /* F1 -> F13 Until I can find BRIGHTNESS DOWN */
+       case 0x3b: return 0x69; /* F2 -> F14 Until I can find BRIGHTNESS UP */
+       case 0x3c: return 0x6A; /* F3 -> F15 Until I can find SCALE */
+       case 0x3d: return 0x6B; /* F4 -> F16 Until I can find ALL APPLICATIONS */
+       case 0x3e: return 0x6C; /* F5 -> F17 Until I can find KBD BACKLIGHT DOWN */
+       case 0x3f: return 0x6D; /* F6 -> F18 Until I can find KBD BACKLIGHT UP */
+
+       case 0x40: return 0xEA; /* F7 -> MEDIA PREV */
+       case 0x41: return 0xE8; /* F8 -> PLAY/PAUSE */
+       case 0x42: return 0xEB; /* F9 -> MEDIA NEXT */
+       case 0x43: return 0x7f; /* F10 -> MUTE */
+       case 0x44: return 0x81; /* F11 -> VOLUME DOWN */
+       case 0x45: return 0x80; /* F12 -> VOLUME UP */
	default: return keycode;
	}
 }
@@ -687,6 +704,20 @@
			modifiers |= MOD_FN;
	}

+       /* Check for Apple Fn key in Consumer Control (report ID 1, byte 8) */
+       if (sc->sc_kbd_id != 0 && len >= 9 && id == 1) {
+               if (buf[8] == 0x02) {
+                       /* Fn key pressed */
+                       DPRINTF("FN key from Consumer Control pressed!\n");
+                       modifiers |= MOD_FN;
+                       bit_set(sc->sc_ndata, APPLE_FN_KEYCODE);
+               } else if (buf[8] == 0x00) {
+                       /* Fn key released */
+                       DPRINTF("FN key from Consumer Control released!\n");
+                       bit_clear(sc->sc_ndata, APPLE_FN_KEYCODE);
+               }
+       }
+
	bit_foreach(sc->sc_loc_key_valid, HKBD_NKEYCODE, i) {
		if (id != sc->sc_id_loc_key[i]) {
			continue;       /* invalid HID ID */
@@ -736,6 +767,40 @@
	bit_foreach(sc->sc_ndata, HKBD_NKEYCODE, i)
		DPRINTF("Key 0x%02x pressed\n", i);
 #endif
+       /* #ifdef EVDEV_SUPPORT */
+       /*   if (modifiers & MOD_FN) { */
+       /*     if (sc->sc_evdev != NULL) { */
+       /*       int evk = 0; */
+       /*       bit_foreach(sc->sc_ndata, HKBD_NKEYCODE, i) { */
+       /*       switch (i) { */
+       /*       case 0x3a: evk = KEY_BRIGHTNESSDOWN; break; */
+       /*       case 0x3b: evk = KEY_BRIGHTNESSUP;   break; */
+       /*       case 0x3c: evk = KEY_SCALE;          break; /\* Mission Ctrl *\/ */
+       /*       case 0x3d: evk = KEY_DASHBOARD;      break; /\* Launchpad *\/ */
+       /*       case 0x3e: evk = KEY_KBDILLUMDOWN;   break; */
+       /*       case 0x3f: evk = KEY_KBDILLUMUP;     break; */
+       /*       case 0x40: evk = KEY_PREVIOUSSONG;   break; */
+       /*       case 0x41: evk = KEY_PLAYPAUSE;      break; */
+       /*       case 0x42: evk = KEY_NEXTSONG;       break; */
+       /*       case 0x43: evk = KEY_MUTE;           break; */
+       /*       case 0x44: evk = KEY_VOLUMEDOWN;     break; */
+       /*       case 0x45: evk = KEY_VOLUMEUP;       break; */
+       /*       default: evk = 0; break; */
+       /*       } */
+       /*       if (evk) { */
+       /*      DPRINTF("Fn Key 0x%02x -> 0x%02x\n", i, evk); */
+       /*      if (bit_test(sc->sc_ndata, i) && !bit_test(sc->sc_odata, i)) { */
+       /*        evdev_push_event(sc->sc_evdev, EV_KEY, evk, 1); */
+       /*      } else if (!bit_test(sc->sc_ndata, i) && bit_test(sc->sc_odata, i)) { */
+       /*        evdev_push_event(sc->sc_evdev, EV_KEY, evk, 0); */
+       /*      } */
+       /*      bit_clear(sc->sc_ndata, i);  // Suppress F-key */
+       /*       } */
+       /*     } */
+       /*       evdev_sync(sc->sc_evdev); */
+       /*     } */
+       /*   } */
+       /* #endif */
	hkbd_interrupt(sc);
 }

@@ -1934,6 +1999,8 @@
		0x5c,   /* Keyboard Intl' 6 (Keypad ,) (For PC-9821 layout) */
		0x71,   /* Apple Keyboard JIS (Kana) */
		0x72,   /* Apple Keyboard JIS (Eisu) */
+               /* Misc 200 - 255 */
+               0xff,   /* Apple Fn key */
	};

	if ((code >= 89) && (code < (int)(89 + nitems(scan)))) {
#+end_src

#+begin_src diff
--- /usr/src/sys/dev/evdev/evdev_utils.c        2026-01-29 09:21:12.143596000 +0000
+++ /home/anon/src/freebsd-src/sys/dev/evdev/evdev_utils.c      2026-01-28 23:42:32.891340000 +0000
@@ -108,7 +108,7 @@
	KEY_WWW,        KEY_BACK,       KEY_FORWARD,    KEY_STOP,
	KEY_FIND,       KEY_SCROLLUP,   KEY_SCROLLDOWN, KEY_EDIT,
	KEY_SLEEP,      KEY_COFFEE,     KEY_REFRESH,    KEY_CALC,
-       NONE,           NONE,           NONE,           KEY_WAKEUP,
+       NONE,           NONE,           NONE,           NONE,

 };
#+end_src

* SUDOERS

#+begin_src con
Defaults insults
Defaults timestamp_timeout = 30
%wheel ALL=(ALL:ALL) ALL
%operator ALL=(ALL) NOPASSWD: /usr/bin/backlight
#+end_src

* VT

Either copy an existing keymap file from =/usr/share/vt/keymaps= or use
=kbdcontrol -d > foo.kbd= to generate a new keymap. Then use the =kbdscan=
package to figure out the scancode for a given key.

Use =kbdcontrol -l /path/to/foo.kbd= to test the new layout and once happy put
it in =/usr/share/vt/keymaps= and run =sysrc keymap=foo.kbd= or add
=keymap=foo.kbd= to =/etc/rc.conf=.

Once everything is working as expected and you've tested with a reboot, add an
entry below, and optionally add =:tangle /sudo::/usr/share/vt/keymaps/foo.kbd=.

** JP EMACS MACBOOK

Make the most of the extra modifier keys on a Korean/Japanese layout

#+begin_src conf :tangle /sudo::/usr/share/vt/keymaps/jp.emacs.macbook.kbd :tangle-mode o444
#                                                         alt
# scan                       cntrl          alt    alt   cntrl lock
# code  base   shift  cntrl  shift  alt    shift  cntrl  shift state
# ------------------------------------------------------------------
  000   nop    nop    nop    nop    nop    nop    nop    nop     O
  001   clock  clock  clock  clock  clock  clock  susp   clock   O
  002   '1'    '!'    nop    nop    '1'    '!'    nop    nop     O
  003   '2'    '@'    nul    nul    '2'    '@'    nul    nul     O
  004   '3'    '#'    nop    nop    '3'    '#'    nop    nop     O
  005   '4'    '$'    nop    nop    '4'    '$'    nop    nop     O
  006   '5'    '%'    nop    nop    '5'    '%'    nop    nop     O
  007   '6'    '^'    rs     rs     '6'    '^'    rs     rs      O
  008   '7'    '&'    nop    nop    '7'    '&'    nop    nop     O
  009   '8'    '*'    nop    nop    '8'    '*'    nop    nop     O
  010   '9'    '('    nop    nop    '9'    '('    nop    nop     O
  011   '0'    ')'    nop    nop    '0'    ')'    nop    nop     O
  012   '-'    '_'    us     us     '-'    '_'    us     us      O
  013   '='    '+'    nop    nop    '='    '+'    nop    nop     O
  014   bs     bs     del    del    bs     bs     del    del     O
  015   ht     btab   nop    nop    ht     btab   nop    nop     O
  016   'q'    'Q'    dc1    dc1    'q'    'Q'    dc1    dc1     C
  017   'w'    'W'    etb    etb    'w'    'W'    etb    etb     C
  018   'e'    'E'    enq    enq    'e'    'E'    enq    enq     C
  019   'r'    'R'    dc2    dc2    'r'    'R'    dc2    dc2     C
  020   't'    'T'    dc4    dc4    't'    'T'    dc4    dc4     C
  021   'y'    'Y'    em     em     'y'    'Y'    em     em      C
  022   'u'    'U'    nak    nak    'u'    'U'    nak    nak     C
  023   'i'    'I'    ht     ht     'i'    'I'    ht     ht      C
  024   'o'    'O'    si     si     'o'    'O'    si     si      C
  025   'p'    'P'    dle    dle    'p'    'P'    dle    dle     C
  026   '['    '{'    esc    esc    '['    '{'    esc    esc     O
  027   ']'    '}'    gs     gs     ']'    '}'    gs     gs      O
  028   cr     cr     nl     nl     cr     cr     nl     nl      O
  029   esc    esc    esc    esc    esc    esc    esc    esc     O
  030   'a'    'A'    soh    soh    'a'    'A'    soh    soh     C
  031   's'    'S'    dc3    dc3    's'    'S'    dc3    dc3     C
  032   'd'    'D'    eot    eot    'd'    'D'    eot    eot     C
  033   'f'    'F'    ack    ack    'f'    'F'    ack    ack     C
  034   'g'    'G'    bel    bel    'g'    'G'    bel    bel     C
  035   'h'    'H'    bs     bs     'h'    'H'    bs     bs      C
  036   'j'    'J'    nl     nl     'j'    'J'    nl     nl      C
  037   'k'    'K'    vt     vt     'k'    'K'    vt     vt      C
  038   'l'    'L'    ff     ff     'l'    'L'    ff     ff      C
  039   ';'    ':'    nop    nop    ';'    ':'    nop    nop     O
  040   '''    '"'    nop    nop    '''    '"'    nop    nop     O
  041   '`'    '~'    nop    nop    '`'    '~'    nop    nop     O
  042   lshift lshift lshift lshift lshift lshift lshift lshift  O
  043   '\'    '|'    fs     fs     '\'    '|'    fs     fs      O
  044   'z'    'Z'    sub    sub    'z'    'Z'    sub    sub     C
  045   'x'    'X'    can    can    'x'    'X'    can    can     C
  046   'c'    'C'    etx    etx    'c'    'C'    etx    etx     C
  047   'v'    'V'    syn    syn    'v'    'V'    syn    syn     C
  048   'b'    'B'    stx    stx    'b'    'B'    stx    stx     C
  049   'n'    'N'    so     so     'n'    'N'    so     so      C
  050   'm'    'M'    cr     cr     'm'    'M'    cr     cr      C
  051   ','    '<'    nop    nop    ','    '<'    nop    nop     O
  052   '.'    '>'    nop    nop    '.'    '>'    nop    nop     O
  053   '/'    '?'    us     nop    '/'    '?'    nop    nop     O
  054   rshift rshift rshift rshift rshift rshift rshift rshift  O
  055   '*'    '*'    '*'    '*'    '*'    '*'    '*'    '*'     O
  056   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
  057   ' '    ' '    ' '    ' '    ' '    ' '    ' '    ' '     O
  058   esc    esc    esc    esc    esc    esc    esc    esc     O
  059   fkey01 fkey13 scr01  fkey37 scr01  scr11  scr01  scr11   O
  060   fkey02 fkey14 scr02  fkey38 scr02  scr12  scr02  scr12   O
  061   fkey03 fkey15 scr03  fkey39 scr03  scr13  scr03  scr13   O
  062   fkey04 fkey16 scr04  fkey40 scr04  scr14  scr04  scr14   O
  063   fkey05 fkey17 scr05  fkey41 scr05  scr15  scr05  scr15   O
  064   fkey06 fkey18 scr06  fkey42 scr06  scr16  scr06  scr16   O
  065   fkey07 fkey19 scr07  fkey43 scr07  scr07  scr07  scr07   O
  066   fkey08 fkey20 scr08  fkey44 scr08  scr08  scr08  scr08   O
  067   fkey09 fkey21 scr09  fkey45 scr09  scr09  scr09  scr09   O
  068   fkey10 fkey22 scr10  fkey46 scr10  scr10  scr10  scr10   O
  069   nlock  nlock  nlock  nlock  nlock  nlock  nlock  nlock   O
  070   slock  slock  slock  slock  slock  slock  slock  slock   O
  071   fkey49 '7'    '7'    '7'    '7'    '7'    '7'    '7'     N
  072   fkey50 '8'    '8'    '8'    '8'    '8'    '8'    '8'     N
  073   fkey51 '9'    '9'    '9'    '9'    '9'    '9'    '9'     N
  074   fkey52 '-'    '-'    '-'    '-'    '-'    '-'    '-'     N
  075   fkey53 '4'    '4'    '4'    '4'    '4'    '4'    '4'     N
  076   fkey54 '5'    '5'    '5'    '5'    '5'    '5'    '5'     N
  077   fkey55 '6'    '6'    '6'    '6'    '6'    '6'    '6'     N
  078   fkey56 '+'    '+'    '+'    '+'    '+'    '+'    '+'     N
  079   fkey57 '1'    '1'    '1'    '1'    '1'    '1'    '1'     N
  080   fkey58 '2'    '2'    '2'    '2'    '2'    '2'    '2'     N
  081   fkey59 '3'    '3'    '3'    '3'    '3'    '3'    '3'     N
  082   fkey60 '0'    '0'    '0'    '0'    '0'    '0'    '0'     N
  083   del    '.'    '.'    '.'    '.'    '.'    boot   boot    N
  084   nop    nop    nop    nop    nop    nop    nop    nop     O
  085   nop    nop    nop    nop    nop    nop    nop    nop     O
  086   nop    nop    nop    nop    nop    nop    nop    nop     O
  087   fkey11 fkey23 scr11  fkey47 scr11  scr11  scr11  scr11   O
  088   fkey12 fkey24 scr12  fkey48 scr12  scr12  scr12  scr12   O
  089   cr     cr     nl     nl     cr     cr     nl     nl      O
  090   rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl   O
  091   '/'    '/'    '/'    '/'    '/'    '/'    '/'    '/'     N
  092   rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl   O
  093   ralt   ralt   ralt   ralt   ralt   ralt   ralt   ralt    O
  094   fkey49 fkey49 fkey49 fkey49 fkey49 fkey49 fkey49 fkey49  O
  095   fkey50 fkey50 slock  fkey50 slock  fkey50 fkey50 fkey50  O
  096   fkey51 fkey51 fkey51 fkey51 fkey51 fkey51 fkey51 fkey51  O
  097   fkey53 fkey53 pscr   fkey53 pscr   fkey53 fkey53 fkey53  O
  098   fkey55 fkey55 nscr   fkey55 nscr   fkey55 fkey55 fkey55  O
  099   fkey57 fkey57 fkey57 fkey57 fkey57 fkey57 fkey57 fkey57  O
  100   fkey58 fkey58 slock  fkey58 slock  fkey58 fkey58 fkey58  O
  101   fkey59 fkey59 fkey59 fkey59 fkey59 fkey59 fkey59 fkey59  O
  102   fkey60 paste  fkey60 fkey60 fkey60 fkey60 fkey60 fkey60  O
  103   fkey61 fkey61 fkey61 fkey61 fkey61 fkey61 boot   fkey61  O
  104   slock  saver  slock  saver  susp   nop    susp   nop     O
  105   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
  106   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
  107   fkey64 fkey64 fkey64 fkey64 fkey64 fkey64 fkey64 fkey64  O
  108   nop    nop    nop    nop    nop    nop    nop    nop     O
  113   lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl   O
  114   lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl   O
  115   '`'    '~'    nop    nop    '`'    '~'    nop    nop     O
  125   bs     bs     del    del    bs     bs     del    del     O
#+end_src
** US EMACS MACBOOK

+ ESC <=> CapsLock
+ CMD => CTRL
+ RALT => LALT
+ Del CTRL-ALT-Space => Suspend
+ Del CTRL-ALT-ESC => Debug
+ Add CTRL-ALT-CapsLock => Suspend
+ CTRL+F{1..12} => Switch to TTY{1..12}
+ CTRL+Left/Right => Previous/Next TTY
+ CTRL+Up/Down => ScrollLock

#+begin_src conf :tangle /sudo::/usr/share/vt/keymaps/us.emacs.macbook.kbd :tangle-mode o444
  #                                                         alt
  # scan                       cntrl          alt    alt   cntrl lock
  # code  base   shift  cntrl  shift  alt    shift  cntrl  shift state
  # ------------------------------------------------------------------
    000   nop    nop    nop    nop    nop    nop    nop    nop     O
    001   clock  clock  clock  clock  clock  clock  susp  clock   O
    002   '1'    '!'    nop    nop    '1'    '!'    nop    nop     O
    003   '2'    '@'    nul    nul    '2'    '@'    nul    nul     O
    004   '3'    '#'    nop    nop    '3'    '#'    nop    nop     O
    005   '4'    '$'    nop    nop    '4'    '$'    nop    nop     O
    006   '5'    '%'    nop    nop    '5'    '%'    nop    nop     O
    007   '6'    '^'    rs     rs     '6'    '^'    rs     rs      O
    008   '7'    '&'    nop    nop    '7'    '&'    nop    nop     O
    009   '8'    '*'    nop    nop    '8'    '*'    nop    nop     O
    010   '9'    '('    nop    nop    '9'    '('    nop    nop     O
    011   '0'    ')'    nop    nop    '0'    ')'    nop    nop     O
    012   '-'    '_'    us     us     '-'    '_'    us     us      O
    013   '='    '+'    nop    nop    '='    '+'    nop    nop     O
    014   bs     bs     del    del    bs     bs     del    del     O
    015   ht     btab   nop    nop    ht     btab   nop    nop     O
    016   'q'    'Q'    dc1    dc1    'q'    'Q'    dc1    dc1     C
    017   'w'    'W'    etb    etb    'w'    'W'    etb    etb     C
    018   'e'    'E'    enq    enq    'e'    'E'    enq    enq     C
    019   'r'    'R'    dc2    dc2    'r'    'R'    dc2    dc2     C
    020   't'    'T'    dc4    dc4    't'    'T'    dc4    dc4     C
    021   'y'    'Y'    em     em     'y'    'Y'    em     em      C
    022   'u'    'U'    nak    nak    'u'    'U'    nak    nak     C
    023   'i'    'I'    ht     ht     'i'    'I'    ht     ht      C
    024   'o'    'O'    si     si     'o'    'O'    si     si      C
    025   'p'    'P'    dle    dle    'p'    'P'    dle    dle     C
    026   '['    '{'    esc    esc    '['    '{'    esc    esc     O
    027   ']'    '}'    gs     gs     ']'    '}'    gs     gs      O
    028   cr     cr     nl     nl     cr     cr     nl     nl      O
    029   lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl   O
    030   'a'    'A'    soh    soh    'a'    'A'    soh    soh     C
    031   's'    'S'    dc3    dc3    's'    'S'    dc3    dc3     C
    032   'd'    'D'    eot    eot    'd'    'D'    eot    eot     C
    033   'f'    'F'    ack    ack    'f'    'F'    ack    ack     C
    034   'g'    'G'    bel    bel    'g'    'G'    bel    bel     C
    035   'h'    'H'    bs     bs     'h'    'H'    bs     bs      C
    036   'j'    'J'    nl     nl     'j'    'J'    nl     nl      C
    037   'k'    'K'    vt     vt     'k'    'K'    vt     vt      C
    038   'l'    'L'    ff     ff     'l'    'L'    ff     ff      C
    039   ';'    ':'    nop    nop    ';'    ':'    nop    nop     O
    040   '''    '"'    nop    nop    '''    '"'    nop    nop     O
    041   '`'    '~'    nop    nop    '`'    '~'    nop    nop     O
    042   lshift lshift lshift lshift lshift lshift lshift lshift  O
    043   '\'    '|'    fs     fs     '\'    '|'    fs     fs      O
    044   'z'    'Z'    sub    sub    'z'    'Z'    sub    sub     C
    045   'x'    'X'    can    can    'x'    'X'    can    can     C
    046   'c'    'C'    etx    etx    'c'    'C'    etx    etx     C
    047   'v'    'V'    syn    syn    'v'    'V'    syn    syn     C
    048   'b'    'B'    stx    stx    'b'    'B'    stx    stx     C
    049   'n'    'N'    so     so     'n'    'N'    so     so      C
    050   'm'    'M'    cr     cr     'm'    'M'    cr     cr      C
    051   ','    '<'    nop    nop    ','    '<'    nop    nop     O
    052   '.'    '>'    nop    nop    '.'    '>'    nop    nop     O
    053   '/'    '?'    nop    nop    '/'    '?'    nop    nop     O
    054   rshift rshift rshift rshift rshift rshift rshift rshift  O
    055   '*'    '*'    '*'    '*'    '*'    '*'    '*'    '*'     O
    056   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
    057   ' '    ' '    ' '    ' '    ' '    ' '    ' '    ' '     O
    058   esc    esc    esc    esc    esc    esc    esc    esc     O
    059   fkey01 fkey13 scr01  fkey37 scr01  scr11  scr01  scr11   O
    060   fkey02 fkey14 scr02  fkey38 scr02  scr12  scr02  scr12   O
    061   fkey03 fkey15 scr03  fkey39 scr03  scr13  scr03  scr13   O
    062   fkey04 fkey16 scr04  fkey40 scr04  scr14  scr04  scr14   O
    063   fkey05 fkey17 scr05  fkey41 scr05  scr15  scr05  scr15   O
    064   fkey06 fkey18 scr06  fkey42 scr06  scr16  scr06  scr16   O
    065   fkey07 fkey19 scr07  fkey43 scr07  scr07  scr07  scr07   O
    066   fkey08 fkey20 scr08  fkey44 scr08  scr08  scr08  scr08   O
    067   fkey09 fkey21 scr09  fkey45 scr09  scr09  scr09  scr09   O
    068   fkey10 fkey22 scr10  fkey46 scr10  scr10  scr10  scr10   O
    069   nlock  nlock  nlock  nlock  nlock  nlock  nlock  nlock   O
    070   slock  slock  slock  slock  slock  slock  slock  slock   O
    071   fkey49 '7'    '7'    '7'    '7'    '7'    '7'    '7'     N
    072   fkey50 '8'    '8'    '8'    '8'    '8'    '8'    '8'     N
    073   fkey51 '9'    '9'    '9'    '9'    '9'    '9'    '9'     N
    074   fkey52 '-'    '-'    '-'    '-'    '-'    '-'    '-'     N
    075   fkey53 '4'    '4'    '4'    '4'    '4'    '4'    '4'     N
    076   fkey54 '5'    '5'    '5'    '5'    '5'    '5'    '5'     N
    077   fkey55 '6'    '6'    '6'    '6'    '6'    '6'    '6'     N
    078   fkey56 '+'    '+'    '+'    '+'    '+'    '+'    '+'     N
    079   fkey57 '1'    '1'    '1'    '1'    '1'    '1'    '1'     N
    080   fkey58 '2'    '2'    '2'    '2'    '2'    '2'    '2'     N
    081   fkey59 '3'    '3'    '3'    '3'    '3'    '3'    '3'     N
    082   fkey60 '0'    '0'    '0'    '0'    '0'    '0'    '0'     N
    083   del    '.'    '.'    '.'    '.'    '.'    boot   boot    N
    084   nop    nop    nop    nop    nop    nop    nop    nop     O
    085   nop    nop    nop    nop    nop    nop    nop    nop     O
    086   '`'    '~'    nop    nop    '`'    '~'    nop    nop     O
    087   fkey11 fkey23 scr11  fkey47 scr11  scr11  scr11  scr11   O
    088   fkey12 fkey24 scr12  fkey48 scr12  scr12  scr12  scr12   O
    089   cr     cr     nl     nl     cr     cr     nl     nl      O
    090   rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl   O
    091   '/'    '/'    '/'    '/'    '/'    '/'    '/'    '/'     N
    092   nscr   pscr   debug  debug  nop    nop    nop    nop     O
    093   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
    094   fkey49 fkey49 fkey49 fkey49 fkey49 fkey49 fkey49 fkey49  O
    095   fkey50 fkey50 slock  fkey50 slock  fkey50 fkey50 fkey50  O
    096   fkey51 fkey51 fkey51 fkey51 fkey51 fkey51 fkey51 fkey51  O
    097   fkey53 fkey53 pscr   fkey53 pscr   fkey53 fkey53 fkey53  O
    098   fkey55 fkey55 nscr   fkey55 nscr   fkey55 fkey55 fkey55  O
    099   fkey57 fkey57 fkey57 fkey57 fkey57 fkey57 fkey57 fkey57  O
    100   fkey58 fkey58 slock  fkey58 slock  fkey58 fkey58 fkey58  O
    101   fkey59 fkey59 fkey59 fkey59 fkey59 fkey59 fkey59 fkey59  O
    102   fkey60 paste  fkey60 fkey60 fkey60 fkey60 fkey60 fkey60  O
    103   fkey61 fkey61 fkey61 fkey61 fkey61 fkey61 boot   fkey61  O
    104   slock  saver  slock  saver  susp   nop    susp   nop     O
    105   lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl   O
    106   rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl   O
    107   fkey64 fkey64 fkey64 fkey64 fkey64 fkey64 fkey64 fkey64  O
    108   nop    nop    nop    nop    nop    nop    nop    nop     O

#+end_src
** UK THINKPAD SPACE CADET
#+BEGIN_SRC conf
  #                                                         alt
  # scan                       cntrl          alt    alt   cntrl lock
  # code  base   shift  cntrl  shift  alt    shift  cntrl  shift state
  # ------------------------------------------------------------------
    000   nop    nop    nop    nop    nop    nop    nop    nop     O
    001   clock  clock  clock  clock  clock  clock  debug  clock   O
    002   '1'    '!'    nop    nop    '`'    '`'    nop    nop     O
    003   '2'    '"'    nul    nul    '@'    '@'    nul    nul     O
    004   '3'    0xa3   nop    nop    '#'    '#'    nop    nop     O
    005   '4'    '$'    0xa4   0xa4   '4'    '$'    nop    nop     O
    006   '5'    '%'    nop    nop    '5'    '%'    nop    nop     O
    007   '6'    '^'    rs     rs     '^'    '^'    rs     rs      O
    008   '7'    '&'    nop    nop    '['    '['    esc    esc     O
    009   '8'    '*'    nop    nop    '8'    '*'    nop    nop     O
    010   '9'    '('    nop    nop    ']'    ']'    gs     gs      O
    011   '0'    ')'    nop    nop    '{'    '{'    nop    nop     O
    012   '-'    '_'    us     us     '|'    '|'    us     us      O
    013   '='    '+'    nop    nop    '}'    '}'    nop    nop     O
    014   bs     bs     del    del    bs     bs     del    del     O
    015   ht     btab   nop    nop    ht     btab   nop    nop     O
    016   'q'    'Q'    dc1    dc1    'q'    'Q'    dc1    dc1     C
    017   'w'    'W'    etb    etb    'w'    'W'    etb    etb     C
    018   'e'    'E'    enq    enq    0x20ac 'E'    enq    enq     C
    019   'r'    'R'    dc2    dc2    'r'    'R'    dc2    dc2     C
    020   't'    'T'    dc4    dc4    't'    'T'    dc4    dc4     C
    021   'y'    'Y'    em     em     'y'    'Y'    em     em      C
    022   'u'    'U'    nak    nak    'u'    'U'    nak    nak     C
    023   'i'    'I'    ht     ht     'i'    'I'    ht     ht      C
    024   'o'    'O'    si     si     'o'    'O'    si     si      C
    025   'p'    'P'    dle    dle    'p'    'P'    dle    dle     C
    026   '['    '{'    esc    esc    '['    '{'    esc    esc     O
    027   ']'    '}'    gs     gs     ']'    '}'    gs     gs      O
    028   cr     cr     nl     nl     cr     cr     nl     nl      O
    029   pscr   pscr   pscr   pscr   pscr   pscr   pscr   pscr    O
    030   'a'    'A'    soh    soh    'a'    'A'    soh    soh     C
    031   's'    'S'    dc3    dc3    's'    'S'    dc3    dc3     C
    032   'd'    'D'    eot    eot    'd'    'D'    eot    eot     C
    033   'f'    'F'    ack    ack    'f'    'F'    ack    ack     C
    034   'g'    'G'    bel    bel    'g'    'G'    bel    bel     C
    035   'h'    'H'    bs     bs     'h'    'H'    bs     bs      C
    036   'j'    'J'    nl     nl     'j'    'J'    nl     nl      C
    037   'k'    'K'    vt     vt     'k'    'K'    vt     vt      C
    038   'l'    'L'    ff     ff     'l'    'L'    ff     ff      C
    039   ';'    ':'    nop    nop    ';'    ':'    nop    nop     O
    040   '''    '@'    nul    nul    '''    '@'    nul    nul     O
    041   '`'    0xac   nop    nop    '|'    '|'    nop    nop     O
    042   lshift lshift lshift lshift lshift lshift lshift lshift  O
    043   '#'    '~'    nop    nop    '#'    '~'    nop    nop     O
    044   'z'    'Z'    sub    sub    'z'    'Z'    sub    sub     C
    045   'x'    'X'    can    can    'x'    'X'    can    can     C
    046   'c'    'C'    etx    etx    'c'    'C'    etx    etx     C
    047   'v'    'V'    syn    syn    'v'    'V'    syn    syn     C
    048   'b'    'B'    stx    stx    'b'    'B'    stx    stx     C
    049   'n'    'N'    so     so     'n'    'N'    so     so      C
    050   'm'    'M'    cr     cr     'm'    'M'    cr     cr      C
    051   ','    '<'    nop    nop    ','    '<'    nop    nop     O
    052   '.'    '>'    nop    nop    '.'    '>'    nop    nop     O
    053   '/'    '?'    nop    nop    '/'    '?'    nop    nop     O
    054   rshift rshift rshift rshift rshift rshift rshift rshift  O
    055   '*'    '*'    '*'    '*'    '*'    '*'    '*'    '*'     O
    056   lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl  lctrl   O
    057   ' '    ' '    nul    ' '    ' '    ' '    susp   ' '     O
    058   esc    esc    esc    esc    esc    esc    esc    esc     O
    059   fkey01 fkey13 fkey25 fkey37 scr01  scr11  scr01  scr11   O
    060   fkey02 fkey14 fkey26 fkey38 scr02  scr12  scr02  scr12   O
    061   fkey03 fkey15 fkey27 fkey39 scr03  scr13  scr03  scr13   O
    062   fkey04 fkey16 fkey28 fkey40 scr04  scr14  scr04  scr14   O
    063   fkey05 fkey17 fkey29 fkey41 scr05  scr15  scr05  scr15   O
    064   fkey06 fkey18 fkey30 fkey42 scr06  scr16  scr06  scr16   O
    065   fkey07 fkey19 fkey31 fkey43 scr07  scr07  scr07  scr07   O
    066   fkey08 fkey20 fkey32 fkey44 scr08  scr08  scr08  scr08   O
    067   fkey09 fkey21 fkey33 fkey45 scr09  scr09  scr09  scr09   O
    068   fkey10 fkey22 fkey34 fkey46 scr10  scr10  scr10  scr10   O
    069   nlock  nlock  nlock  nlock  nlock  nlock  nlock  nlock   O
    070   slock  slock  slock  slock  slock  slock  slock  slock   O
    071   fkey49 '7'    '7'    '7'    '7'    '7'    '7'    '7'     N
    072   fkey50 '8'    '8'    '8'    '8'    '8'    '8'    '8'     N
    073   fkey51 '9'    '9'    '9'    '9'    '9'    '9'    '9'     N
    074   fkey52 '-'    '-'    '-'    '-'    '-'    '-'    '-'     N
    075   fkey53 '4'    '4'    '4'    '4'    '4'    '4'    '4'     N
    076   fkey54 '5'    '5'    '5'    '5'    '5'    '5'    '5'     N
    077   fkey55 '6'    '6'    '6'    '6'    '6'    '6'    '6'     N
    078   fkey56 '+'    '+'    '+'    '+'    '+'    '+'    '+'     N
    079   fkey57 '1'    '1'    '1'    '1'    '1'    '1'    '1'     N
    080   fkey58 '2'    '2'    '2'    '2'    '2'    '2'    '2'     N
    081   fkey59 '3'    '3'    '3'    '3'    '3'    '3'    '3'     N
    082   fkey60 '0'    '0'    '0'    '0'    '0'    '0'    '0'     N
    083   del    '.'    '.'    '.'    '.'    '.'    boot   boot    N
    084   nop    nop    nop    nop    nop    nop    nop    nop     O
    085   nop    nop    nop    nop    nop    nop    nop    nop     O
    086   '\'    '|'    fs     fs     '\'    '|'    fs     fs      O
    087   fkey11 fkey23 fkey35 fkey47 scr11  scr11  scr11  scr11   O
    088   fkey12 fkey24 fkey36 fkey48 scr12  scr12  scr12  scr12   O
    089   cr     cr     nl     nl     cr     cr     nl     nl      O
    090   nop    nop    nop    nop    nop    nop    nop    nop    O
    091   '/'    '/'    '/'    '/'    '/'    '/'    '/'    '/'     N
    092   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
    093   rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl  rctrl   O
    094   fkey49 fkey49 fkey49 fkey49 fkey49 fkey49 fkey49 fkey49  O
    095   fkey50 fkey50 fkey50 fkey50 fkey50 fkey50 fkey50 fkey50  O
    096   fkey51 fkey51 fkey51 fkey51 fkey51 fkey51 fkey51 fkey51  O
    097   fkey53 fkey53 fkey53 fkey53 fkey53 fkey53 fkey53 fkey53  O
    098   fkey55 fkey55 fkey55 fkey55 fkey55 fkey55 fkey55 fkey55  O
    099   fkey57 fkey57 fkey57 fkey57 fkey57 fkey57 fkey57 fkey57  O
    100   fkey58 fkey58 fkey58 fkey58 fkey58 fkey58 fkey58 fkey58  O
    101   fkey59 fkey59 fkey59 fkey59 fkey59 fkey59 fkey59 fkey59  O
    102   fkey60 paste  fkey60 fkey60 fkey60 fkey60 fkey60 fkey60  O
    103   fkey61 fkey61 fkey61 fkey61 fkey61 fkey61 boot   fkey61  O
    104   slock  saver  slock  saver  susp   nop    susp   nop     O
    105   lalt   lalt   lalt   lalt   lalt   lalt   lalt   lalt    O
    106   fkey63 fkey63 fkey63 fkey63 fkey63 fkey63 fkey63 fkey63  O
    107   fkey64 fkey64 fkey64 fkey64 fkey64 fkey64 fkey64 fkey64  O
    108   nop    nop    nop    nop    nop    nop    nop    nop     O
#+END_SRC

* XORG

On FreeBSD Xorg configuration lives in =/usr/local/etc/X11/xorg.conf.d/= so
add: =:tangle /sudo::/usr/local/etc/X11/xorg.conf.d/20-foo.conf= to the block
declarations if you so wish. However, for now I'm setting all of these to
== whilst I figure things out...

** INTEL
#+begin_src conf
Section "Device"
	Identifier "Card0"
	Driver     "intel"
EndSection
#+end_src
** RADEON
#+begin_src conf
Section "Device"
	Identifier "Card0"
	Driver     "radeon"
EndSection
#+end_src
** MULTIPLE GPU
#+begin_src conf
Section "Device"
	Identifier "Card0"
	Driver     "intel"
	BusID      "pci0:0:2:0"
EndSection

Section "Device"
	Identifier "Card1"
	Driver     "radeon"
	BusID      "pci0:1:0:0"
EndSection
#+end_src
** KEYBOARD

This code might need to go in =/usr/local/share/X11/xorg.conf.d= instead of
=/usr/local/etc/X11/xorg.conf.d/= for the settings to persist across
suspend/resume...

*** MACBOOK STANDARD
#+begin_src conf
  Section "InputClass"
	  Identifier "libinput keyboard catchall"
	  MatchIsKeyboard "on"
	  MatchDevicePath "/dev/input/event*"
	  Driver "libinput"
	  Option "XkbLayout" "us"
	  Option "XkbOptions" "caps:swapescape,ctrl:swap_lwin_lctl,ctrl:swap_rwin_rctl,terminate:ctrl_alt_bksp"
  EndSection
#+end_src
#+begin_src conf
  Section "InputClass"
	    Identifier "Evdev Keyboard"
	    MatchIsKeyboard "on"
	    MatchDevicePath "/dev/input/event*"
	    Option "XkbRules" "evdev"
	    Option "XkbLayout" "us"
	    Option "XkbOptions" "caps:swapescape,ctrl:swap_lwin_lctl,ctrl:swap_rwin_rctl,terminate:ctrl_alt_bksp"

  EndSection
#+end_src
*** MACBOOK KOREAN/JAPANESE
**** EXTRA XKB OPTIONS
#+begin_src conf :tangle /sudo::/usr/local/share/X11/xkb/symbols/hangul
// Make better use of a Korean keyboard with a non-Korean layout

// Hangul and Hangul_Hanja keys -> Control
partial modifier_keys
xkb_symbols "ctrl" {
    replace key <HNGL> { [ Control_L ], type[group1] = "ONE_LEVEL" };
    replace key <HJCV> { [ Control_L ], type[group1] = "ONE_LEVEL" };
    modifier_map Control { <HNGL>, <HJCV> };
};

// Dead key to the right of left Shift -> Grave/Tilde
// Dead key to the right of BackSpace -> BackSpace
partial alphanumeric_keys
xkb_symbols "deadkeys" {
   key <AB11> { [ grave, asciitilde ] };
   key <AE13> { [ BackSpace, Delete ] };
};
#+end_src
#+begin_src conf :tangle /sudo::/usr/local/share/X11/xkb/symbols/leftmods
// Japanese/Korean MacBook (Non-Standard?) Far Left Modifier Options
partial modifier_keys
xkb_symbols "caps_esc_altgr" {
    key <ESC>  { [ Caps_Lock ] };
    key <LCTL> { [ Escape ], type[group1] = "ONE_LEVEL" };
    key <CAPS> { [ ISO_Level3_Shift ], type[group1] = "ONE_LEVEL" };
};

partial modifier_keys
xkb_symbols "caps_esc_hyper" {
    key <ESC>  { [ Caps_Lock ] };
    key <LCTL> { [ Escape ], type[group1] = "ONE_LEVEL" };
    key <CAPS> { [ Hyper_L ], type[group1] = "ONE_LEVEL" };
};

partial modifier_keys
xkb_symbols "caps_esc_menu" {
    key <ESC>  { [ Caps_Lock ] };
    key <LCTL> { [ Escape ], type[group1] = "ONE_LEVEL" };
    key <CAPS> { [ Menu ], type[group1] = "ONE_LEVEL" };
};
#+end_src
**** EVDEV CONFIGURATION
#+name: /usr/local/share/X11/xorg.conf.d/20-evdev.conf
#+begin_src conf
Section "InputClass"
	Identifier		"Evdev keyboard"
	MatchDevicePath		"/dev/input/event*"
	MatchIsKeyboard		"on"
	Option			"XkbRules" "evdev"
	Option			"XkbLayout" "us+hangul(ctrl)+hangul(deadkeys)+leftmods(caps_esc_hyper)"
	Option			"XkbOptions" "altwin:swap_alt_win,terminate:ctrl_alt_bksp"
EndSection
#+end_src
** TOUCHPAD
#+begin_src conf
  Section "InputClass"
	  Identifier "libinput touchpad catchall"
	  MatchIsTouchpad "on"
	  MatchDevicePath "/dev/input/event*"
	  Driver "libinput"
	  Option "Tapping" "True"
	  Option "DisableWhileTyping" "True"
  EndSection
#+end_src
** XSESSION
#+NAME: xsession
#+BEGIN_SRC conf :tangle ~/.xsession
  xset r rate 200 50 dpms 120 180 300
  pixelclock &
  pixelbatt &
  sct 4000
  exec cwm
#+END_SRC
#+BEGIN_SRC conf :noweb yes :tangle ~/.xinitrc
  <<xsession>>
#+END_SRC
** XDEFAULTS
#+NAME: xdefaults
#+begin_src conf :tangle ~/.Xdefaults
  XTerm*faceName: monospace:size=13
  XTerm*metaSendsEscape: true
  XTerm*reverseVideo: true
  XTerm*selectToClipboard: true
#+end_src
#+BEGIN_SRC conf :noweb yes :tangle ~/.Xresources
  <<xdefaults>>
#+END_SRC
** RATPOISON
#+begin_src conf :tangle ~/.ratpoisonrc
  exec xscreensaver --no-splash
  exec xbattbar left
  exec sleep 1 && sct 4000
  exec sleep 4 && alttab -mk Alt_R -frame green -inact purple

  set barpadding 0 0
  set bgcolor black
  set fgcolor purple
  set font "monospace:bold:size=12"
  set framesels "asdfjkl;"
  set fwcolor green
  set bwcolor purple
  set historysize 42
  set padding 2 0 0 0

  bind e exec xterm -e emacsclient -nw -c -a ""
  bind C-e exec emacsclient -c -a ""
  bind E exec xterm -e emacs
  bind C-E exec emacs
  bind C-q only
  bind q only
  bind C-space colon
  bind space exec
  bind C-v hsplit
  bind v hsplit
  bind w exec librewolf
  bind Tab select
  bind Return focuslast
  bind M-q quit
  bind M-r exec restart

  definekey top s-j focusdown
  definekey top s-k focusup
  definekey top s-h focusleft
  definekey top s-l focusright
  definekey top s-Return focuslast
  definekey top C-s-j exchangedown
  definekey top C-s-k exchangeup
  definekey top C-s-h exchangeleft
  definekey top C-s-l exchangeright
  definekey top F10 exec mixer vol.mute=toggle
  definekey top F11 exec mixer vol.volume=-5%
  definekey top F12 exec mixer vol.volume=+5%
#+end_src
** CWM
#+BEGIN_SRC conf :tangle ~/.cwmrc
  borderwidth 0
  gap 0 0 0 0
  sticky yes
  snapdist 5
  moveamount 5
  ignore xclock
  fontname "monospace:bold:size=18"

  color activeborder '#B28'
  color inactiveborder '#627'
  color urgencyborder '#FF0'
  color menubg '#000'
  color menufg '#627'
  color font '#DDD'
  color selfont '#FFF'
  color font '#B28'

  unbind-key all
  bind-key 4-BackSpace restart
  bind-key 4C-BackSpace quit
  bind-key 4-Return 'emacsclient -c -a ""'
  bind-key 4M-Return 'xterm'
  bind-key 4C-Return 'librewolf'
  bind-key 4-space menu-exec
  bind-key CS-w menu-window
  bind-key M-Tab window-cycle
  bind-key MS-Tab window-rcycle
  bind-key CS-q window-delete
  bind-key 4-m window-maximize
  bind-key CS-v window-vmaximize
  bind-key CS-h window-hmaximize
  bind-key 4C-m window-fullscreen
  bind-key 4-k window-move-up-big
  bind-key 4-j window-move-down-big
  bind-key 4-l window-move-right-big
  bind-key 4-h window-move-left-big
  bind-key 4C-k window-resize-up-big
  bind-key 4C-j window-resize-down-big
  bind-key 4C-l window-resize-right-big
  bind-key 4C-h window-resize-left-big
  bind-key F1 'sudo backlight - 10'
  bind-key F2 'sudo backlight + 10'
  bind-key F10 'mixer vol.mute=toggle'
  bind-key F11 'mixer vol.volume=-5%'
  bind-key F12 'mixer vol.volume=+5%'

  unbind-mouse all
  bind-mouse R-1 menu-window
  bind-mouse M-1 window-move
  bind-mouse MS-1 window-resize
#+END_SRC
** GTK
#+NAME: gtk2
#+BEGIN_SRC conf :tangle ~/.gtkrc-2.0.mine
  gtk-key-theme-name = "Emacs"
#+END_SRC

#+BEGIN_SRC conf :noweb yes :tangle ~/.gtkrc-2.0
  <<gtk2>>
#+END_SRC

#+NAME: gtk3
#+BEGIN_SRC conf :tangle ~/.config/gtk-3.0/settings.ini
  [Settings]
  gtk-key-theme-name = Emacs
#+END_SRC
